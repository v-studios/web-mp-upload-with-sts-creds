service: multipart-upload-sts
# app and org for use with dashboard.serverless.com
app: getsts
org: vstudios

provider:
  name: aws
  runtime: python3.8
  logRetentionInDays: 30        # dont create infinite logs as they cost money
  apiKeys:                      # will be generated by CloudFormation and returned
    - ${self:provider.stage}-client1
    - ${self:provider.stage}-client2
  apiGateway:
    apiKeySourceType: HEADER      # not AUTHORIZER

# This did NOT add the role to the Lambda execution role :-(
# iamRoleStatements:
#   - Effect: "Allow"
#     Action:
#       - "sts:AssumeRole"
#     Resource: "arn:aws:iam::MYAWSID:role/cshenton-multipart-upload-sts"               # dont think this is right/useful


package:
 exclude:
   - package-lock.json
   - node_modules/**

functions:
  GetSts:
    handler: getsts.get
    events:
      - http:
          path: /
          method: get
          private: true # Requires clients to add API keys values in the `x-api-key` header of their request



# you can add CloudFormation resource templates here
#resources:
#  Resources:
#    NewResource:
#      Type: AWS::S3::Bucket
#      Properties:
#        BucketName: my-new-bucket
#  Outputs:
#     NewOutput:
#       Description: "Description for the output"
#       Value: "Some output value"
